<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>まいまいの ほしぞら工房</title>
    <link rel="stylesheet" href="game.css">
</head>

<body>

    <div id="main-wrapper">

        <div id="game-container">
            <canvas id="game-canvas"></canvas>

            <!-- ステージ遷移演出 -->
            <div id="screen-transition">
                <div id="location-name">ほしあかりの森</div>
            </div>

            <!-- アイテムカウンター (ほしのもと) -->
            <div id="item-counter">
                <span class="counter-icon">🟡</span>
                <span id="score-text">0</span>
            </div>

            <!-- ★追加: 星カウンター -->
            <div id="star-counter">
                <span class="counter-icon">⭐</span>
                <span id="star-text">0</span>
            </div>

            <!-- HPカウンター -->
            <div id="hp-counter">
            </div>

            <!-- ロード画面 -->
            <div id="screen-load" class="overlay">
                <div class="modal">
                    <h1>ゲームをはじめる</h1>
                    <p>マップデータが見つかりませんでした。</p>
                    <label for="file-input" class="file-label">📂 JSONファイルを選択</label>
                    <input type="file" id="file-input" accept=".json">
                </div>
            </div>

            <!-- ゲームオーバー画面 -->
            <div id="screen-gameover" class="overlay">
                <div class="modal">
                    <h1>GAME OVER</h1>
                    <p>やられちゃった...</p>
                    <button class="retry-btn" onclick="resetGame()">🔄 もう一回！</button>
                </div>
            </div>

            <!-- クリア画面 -->
            <div id="screen-clear" class="overlay">
                <div class="modal">
                    <h2 class="clear-title">素材あつめしゅうりょう！</h2>
                    <p>おつかれさま！</p>
                    <div class="button-group">
                        <button class="retry-btn" onclick="resetGame()">もう一度さがす</button>
                        <button class="atelier-btn" onclick="goToAtelier()">工房へもどる</button>
                    </div>
                </div>
            </div>

            <!-- タッチ操作UI -->
            <div id="ui-container">
                <div class="dpad">
                    <div style="grid-column:2; grid-row:1;"></div>
                    <div id="btn-left" class="dpad-btn">←</div>
                    <div id="btn-down" class="dpad-btn">↓</div>
                    <div id="btn-right" class="dpad-btn">→</div>
                </div>

                <div class="center-panel">
                </div>

                <div class="action-pad">
                    <div id="btn-attack" class="action-btn btn-attack">B</div>
                    <div id="btn-jump" class="action-btn btn-jump">A</div>
                </div>
            </div>

            <div id="control-panel">
                <div id="btn-fullscreen" class="func-btn" title="フルスクリーン">⛶</div>
                <div id="btn-mute" class="func-btn" title="ミュート">🔊</div>
            </div>

        </div>

        <script src="audio.js?v=4.0"></script>
        <script src="constants.js?v=4.0"></script>
        <script src="engine.js?v=4.1"></script>
        
        <!-- クラフト分割 -->
        <script src="craft_manager.js?v=4.1"></script>
        <script src="craft1.js?v=4.1"></script>
        <script src="craft2.js?v=4.1"></script>
        <script src="craft3.js?v=4.1"></script>
        <script src="craft4.js?v=4.1"></script>
        
        <script src="game.js?v=4.1"></script>
</body>

</html>